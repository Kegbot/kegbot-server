{% extends "kegadmin/base.html" %}
{% load kegweblib %}
{% load crispy_forms_tags %}

{% block title %}Kegbot Admin: Edit User: {{ edit_user.username }} | {{ block.super }}{% endblock %}
{% block pagetitle %}Kegbot Admin: Edit User: {{ edit_user.username }}{% endblock %}

{% block kegadmin-main %}

<div class="row-fluid">

<div class="span3">
    {% mugshot_box edit_user %}
    <p>
    <form action="" method="POST">{% csrf_token %}

    {% if edit_user.is_active %}
    <button class="btn btn-large btn-block disabled">Account Enabled</button>
        {% if not edit_user.is_superuser %}
        <input type="submit" name="submit_disable"
            class="btn btn-large btn-block btn-danger" value="Disable Account"/>
        {% endif %}
    {% else %}
    <input type="submit" name="submit_enable"
        class="btn btn-large btn-block btn-success" value="Enable Account"/>
    <button class="btn btn-large btn-block disabled">Account Disabled</button>
    {% endif %}

    </form>
    </p>

    <p>
    <form action="" method="POST">{% csrf_token %}

    {% if request.user.is_superuser %}
        {% if edit_user.is_staff %}
        <button class="btn btn-large btn-block disabled">Staff Status Enabled</button>
        <input type="submit" name="submit_remove_staff"
            class="btn btn-large btn-block btn-danger" value="Disable Staff Status"/>
        {% else %}
        <input type="submit" name="submit_add_staff"
            class="btn btn-large btn-block btn-success" value="Enable Staff Status"/>
        <button class="btn btn-large btn-block disabled">Staff Status Disabled</button>
        {% endif %}
    {% endif %}

    </form>
    </p>
</div>

<div class="span9">

<h2>Account Details
    {% include 'kegadmin/includes/user-status-label.html' %}
</h2>

<table class="table table-bordered">
<tbody>
<tr>
    <th>Name</th>
    <td>{{ edit_user.username }} <span class="muted">(#{{edit_user.id }})</span></td>
</tr>
<tr>
    <th>E-Mail</th>
    <td>{{ edit_user.email }}</td>
</tr>
<tr>
    <th>Date Joined</th>
    <td>{{ edit_user.date_joined }}</td>
</tr>
<tr>
    <th>Last Login</th>
    <td>{{ edit_user.last_login }}</td>
</tr>

</table>

{% if tokens %}
<h2>Authentication Tokens</h2>

<table class="table table-bordered table-hover">
<tbody>
<tr>
    <th>Token</th>
    <th>Status</th>
</tr>
{% for token in tokens %}
<tr>
    <td>
        <a href="{% url "kegadmin-edit-token" token.id %}">
        {% if token.auth_device == "core.rfid" %}
        RFID
        {% elif token.auth_device == "core.onewire" %}
        OneWire
        {% else %}
        {{ token.auth_device }}
        {% endif %}
        {{ token.token_value }}
        </a>
    </td>
    <td>{{ token.enabled }}</td>
{% endfor %}
</table>
</div>
{% endif %}
</div>


</div>
{% endblock %}
